<!-- agregar_producto.html -->
{% extends "base.html" %}

{% block title %}Agregar Producto{% endblock %}

{% block content %}
<div class="max-w-lg mx-auto bg-white rounded-2xl shadow-lg p-8 mt-8 border border-blue-100">
    <h2 class="text-2xl font-bold mb-6 text-blue-700 flex items-center">
        <i class="fas fa-plus mr-2"></i> Agregar Producto
    </h2>
    <form method="post">
        <div class="mb-4">
            <label class="block font-semibold mb-2 text-blue-800">Nombre:</label>
            <input type="text" name="nombre" required class="w-full rounded border border-blue-200 px-3 py-2 bg-blue-50 text-blue-700">
        </div>
        <div class="mb-4">
            <label class="block font-semibold mb-2 text-blue-800">Precio de Venta:</label>
            <input type="number" name="precio" step="0.01" min="0" required class="w-full rounded border border-blue-200 px-3 py-2 bg-blue-50 text-blue-700">
        </div>
        <div class="mb-4">
            <label class="block font-semibold mb-2 text-blue-800">Precio de Costo:</label>
            <input type="number" name="precio_costo" step="0.01" min="0" required class="w-full rounded border border-blue-200 px-3 py-2 bg-blue-50 text-blue-700">
        </div>
        <div class="mb-4">
            <label class="block font-semibold mb-2 text-blue-800">Stock:</label>
            <input type="number" name="stock" min="0" required class="w-full rounded border border-blue-200 px-3 py-2 bg-blue-50 text-blue-700">
        </div>
        <div class="mb-4 flex items-center">
            <input type="checkbox" name="activo" id="activo" checked class="mr-2">
            <label for="activo" class="text-blue-800">Activo</label>
        </div>
        <button type="submit"
            class="bg-blue-400 hover:bg-blue-500 text-white font-bold py-2 px-6 rounded-lg shadow transition">
            <i class="fas fa-check mr-2"></i>Agregar
        </button>
        <a href="{{ url_for('productos') }}"
            class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-2 px-6 rounded-lg shadow ml-2 transition">
            Cancelar
        </a>
    </form>
</div>
{% endblock %}

<!-- ================================ -->

<!-- nueva_venta.html -->
{% extends "base.html" %}

{% block title %}Nueva Venta - SysTec Ventas{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h2 class="card-title">
            <i class="fas fa-cash-register"></i>
            Nueva Venta
        </h2>
    </div>

    {% if productos %}
    <form method="POST" id="ventaForm">
        <div id="productos-venta">
            <div class="producto-item" style="display: grid; grid-template-columns: 2fr 1fr 1fr auto; gap: 1rem; align-items: end; margin-bottom: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 10px;">
                <div>
                    <label class="form-label">Producto</label>
                    <select name="producto_id" class="form-control producto-select" onchange="actualizarPrecio(this)" required>
                        <option value="">Seleccionar producto...</option>
                        {% for producto in productos %}
                        <option value="{{ producto.id }}" data-precio="{{ producto.precio }}" data-stock="{{ producto.stock }}">
                            {{ producto.nombre }} - Stock: {{ producto.stock }} - ${{ "%.2f"|format(producto.precio) }}
                        </option>
                        {% endfor %}
                    </select>
                </div>
                <div>
                    <label class="form-label">Cantidad</label>
                    <input type="number" name="cantidad" class="form-control cantidad-input" min="1" onchange="calcularSubtotal(this)" required>
                </div>
                <div>
                    <label class="form-label">Subtotal</label>
                    <input type="text" class="form-control subtotal-display" readonly style="background: #e9ecef;">
                </div>
                <div>
                    <button type="button" onclick="eliminarProducto(this)" class="btn btn-danger">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
        </div>

        <div style="display: flex; gap: 1rem; margin: 2rem 0;">
            <button type="button" onclick="agregarProducto()" class="btn btn-secondary">
                <i class="fas fa-plus"></i> Agregar Producto
            </button>
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> Guardar Venta
            </button>
        </div>
    </form>
    {% else %}
    <div class="alert alert-warning" role="alert">
        No hay productos disponibles para vender. Por favor, agrega productos primero.
    </div>
    {% endif %}
</div>
{% endblock %}